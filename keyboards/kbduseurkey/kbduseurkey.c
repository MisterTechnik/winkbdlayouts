//---------------------------------------------------------------------------
// Windows Keyboards Layouts (WKL)
// Automatically generated from eurkey.dll
//---------------------------------------------------------------------------

#define KBD_TYPE 4

#include <windows.h>
#include <kbd.h>
#include <dontuse.h>
#include "unicode.h"

//---------------------------------------------------------------------------
// Scan codes to key names
//---------------------------------------------------------------------------

static VSC_LPWSTR key_names[] = {
    {0x01, L"Esc"},
    {0x0E, L"Backspace"},
    {0x0F, L"Tab"},
    {0x1C, L"Enter"},
    {0x1D, L"Ctrl"},
    {0x2A, L"Shift"},
    {0x36, L"Right Shift"},
    {0x37, L"Num *"},
    {0x38, L"Alt"},
    {0x39, L"Space"},
    {0x3A, L"Caps Lock"},
    {0x3B, L"F1"},
    {0x3C, L"F2"},
    {0x3D, L"F3"},
    {0x3E, L"F4"},
    {0x3F, L"F5"},
    {0x40, L"F6"},
    {0x41, L"F7"},
    {0x42, L"F8"},
    {0x43, L"F9"},
    {0x44, L"F10"},
    {0x45, L"Pause"},
    {0x46, L"Scroll Lock"},
    {0x47, L"Num 7"},
    {0x48, L"Num 8"},
    {0x49, L"Num 9"},
    {0x4A, L"Num -"},
    {0x4B, L"Num 4"},
    {0x4C, L"Num 5"},
    {0x4D, L"Num 6"},
    {0x4E, L"Num +"},
    {0x4F, L"Num 1"},
    {0x50, L"Num 2"},
    {0x51, L"Num 3"},
    {0x52, L"Num 0"},
    {0x53, L"Num Del"},
    {0x54, L"Sys Req"},
    {0x57, L"F11"},
    {0x58, L"F12"},
    {0x7C, L"F13"},
    {0x7D, L"F14"},
    {0x7E, L"F15"},
    {0x7F, L"F16"},
    {0x80, L"F17"},
    {0x81, L"F18"},
    {0x82, L"F19"},
    {0x83, L"F20"},
    {0x84, L"F21"},
    {0x85, L"F22"},
    {0x86, L"F23"},
    {0x87, L"F24"},
    {0x00, NULL}
};

//---------------------------------------------------------------------------
// Scan codes to key names (extended keypad)
//---------------------------------------------------------------------------

static VSC_LPWSTR key_names_ext[] = {
    {0x1C, L"Num Enter"},
    {0x1D, L"Right Ctrl"},
    {0x35, L"Num /"},
    {0x37, L"Prnt Scrn"},
    {0x38, L"Right Alt"},
    {0x45, L"Num Lock"},
    {0x46, L"Break"},
    {0x47, L"Home"},
    {0x48, L"Up"},
    {0x49, L"Page Up"},
    {0x4B, L"Left"},
    {0x4D, L"Right"},
    {0x4F, L"End"},
    {0x50, L"Down"},
    {0x51, L"Page Down"},
    {0x52, L"Insert"},
    {0x53, L"Delete"},
    {0x54, L"<00>"},
    {0x56, L"Help"},
    {0x5B, L"Left Windows"},
    {0x5C, L"Right Windows"},
    {0x5D, L"Application"},
    {0x00, NULL}
};

//---------------------------------------------------------------------------
// Names of dead keys
//---------------------------------------------------------------------------

static DEADKEY_LPWSTR key_names_dead[] = {
    L"^"      L"CIRCUMFLEX ACCENT",
    L"\x02c7" L"CARON (Mandarin Chinese third tone)",
    L"\x02da" L"RING ABOVE",
    L"\x00af" L"MACRON",
    L"\x00b4" L"ACUTE ACCENT",
    L"\x00a8" L"DIAERESIS",
    L"`"      L"GRAVE ACCENT",
    L"~"      L"TILDE",
    L"\x00ac" L"NOT SIGN",
    L"\x03b1" L"GREEK SMALL LETTER ALPHA",
    L" "      L"SPACE",
    NULL
};

//---------------------------------------------------------------------------
// Scan code to virtual key conversion table
//---------------------------------------------------------------------------

static USHORT scancode_to_vk[] = {
    /* 00 */ VK__none_,
    /* 01 */ VK_ESCAPE,
    /* 02 */ '1',
    /* 03 */ '2',
    /* 04 */ '3',
    /* 05 */ '4',
    /* 06 */ '5',
    /* 07 */ '6',
    /* 08 */ '7',
    /* 09 */ '8',
    /* 0A */ '9',
    /* 0B */ '0',
    /* 0C */ VK_OEM_MINUS,
    /* 0D */ VK_OEM_PLUS,
    /* 0E */ VK_BACK,
    /* 0F */ VK_TAB,
    /* 10 */ 'Q',
    /* 11 */ 'W',
    /* 12 */ 'E',
    /* 13 */ 'R',
    /* 14 */ 'T',
    /* 15 */ 'Y',
    /* 16 */ 'U',
    /* 17 */ 'I',
    /* 18 */ 'O',
    /* 19 */ 'P',
    /* 1A */ VK_OEM_4,
    /* 1B */ VK_OEM_6,
    /* 1C */ VK_RETURN,
    /* 1D */ VK_LCONTROL,
    /* 1E */ 'A',
    /* 1F */ 'S',
    /* 20 */ 'D',
    /* 21 */ 'F',
    /* 22 */ 'G',
    /* 23 */ 'H',
    /* 24 */ 'J',
    /* 25 */ 'K',
    /* 26 */ 'L',
    /* 27 */ VK_OEM_1,
    /* 28 */ VK_OEM_7,
    /* 29 */ VK_OEM_3,
    /* 2A */ VK_LSHIFT,
    /* 2B */ VK_OEM_5,
    /* 2C */ 'Z',
    /* 2D */ 'X',
    /* 2E */ 'C',
    /* 2F */ 'V',
    /* 30 */ 'B',
    /* 31 */ 'N',
    /* 32 */ 'M',
    /* 33 */ VK_OEM_COMMA,
    /* 34 */ VK_OEM_PERIOD,
    /* 35 */ VK_OEM_2,
    /* 36 */ VK_RSHIFT | KBDEXT,
    /* 37 */ VK_MULTIPLY | KBDMULTIVK,
    /* 38 */ VK_LMENU,
    /* 39 */ VK_SPACE,
    /* 3A */ VK_CAPITAL,
    /* 3B */ VK_F1,
    /* 3C */ VK_F2,
    /* 3D */ VK_F3,
    /* 3E */ VK_F4,
    /* 3F */ VK_F5,
    /* 40 */ VK_F6,
    /* 41 */ VK_F7,
    /* 42 */ VK_F8,
    /* 43 */ VK_F9,
    /* 44 */ VK_F10,
    /* 45 */ VK_NUMLOCK | KBDEXT | KBDMULTIVK,
    /* 46 */ VK_SCROLL | KBDMULTIVK,
    /* 47 */ VK_HOME | KBDSPECIAL | KBDNUMPAD,
    /* 48 */ VK_UP | KBDSPECIAL | KBDNUMPAD,
    /* 49 */ VK_PRIOR | KBDSPECIAL | KBDNUMPAD,
    /* 4A */ VK_SUBTRACT,
    /* 4B */ VK_LEFT | KBDSPECIAL | KBDNUMPAD,
    /* 4C */ VK_CLEAR | KBDSPECIAL | KBDNUMPAD,
    /* 4D */ VK_RIGHT | KBDSPECIAL | KBDNUMPAD,
    /* 4E */ VK_ADD,
    /* 4F */ VK_END | KBDSPECIAL | KBDNUMPAD,
    /* 50 */ VK_DOWN | KBDSPECIAL | KBDNUMPAD,
    /* 51 */ VK_NEXT | KBDSPECIAL | KBDNUMPAD,
    /* 52 */ VK_INSERT | KBDSPECIAL | KBDNUMPAD,
    /* 53 */ VK_DELETE | KBDSPECIAL | KBDNUMPAD,
    /* 54 */ VK_SNAPSHOT,
    /* 55 */ VK__none_,
    /* 56 */ VK_OEM_102,
    /* 57 */ VK_F11,
    /* 58 */ VK_F12,
    /* 59 */ VK_CLEAR,
    /* 5A */ VK_OEM_WSCTRL,
    /* 5B */ VK_OEM_FINISH,
    /* 5C */ VK_OEM_JUMP,
    /* 5D */ VK_EREOF,
    /* 5E */ VK_OEM_BACKTAB,
    /* 5F */ VK_OEM_AUTO,
    /* 60 */ VK__none_,
    /* 61 */ VK__none_,
    /* 62 */ VK_ZOOM,
    /* 63 */ VK_HELP,
    /* 64 */ VK_F13,
    /* 65 */ VK_F14,
    /* 66 */ VK_F15,
    /* 67 */ VK_F16,
    /* 68 */ VK_F17,
    /* 69 */ VK_F18,
    /* 6A */ VK_F19,
    /* 6B */ VK_F20,
    /* 6C */ VK_F21,
    /* 6D */ VK_F22,
    /* 6E */ VK_F23,
    /* 6F */ VK_OEM_PA3,
    /* 70 */ VK__none_,
    /* 71 */ VK_OEM_RESET,
    /* 72 */ VK__none_,
    /* 73 */ 0x00C1,
    /* 74 */ VK__none_,
    /* 75 */ VK__none_,
    /* 76 */ VK_F24,
    /* 77 */ VK__none_,
    /* 78 */ VK__none_,
    /* 79 */ VK__none_,
    /* 7A */ VK__none_,
    /* 7B */ VK_OEM_PA1,
    /* 7C */ VK_TAB,
    /* 7D */ VK__none_,
    /* 7E */ 0x00C2,
};

//---------------------------------------------------------------------------
// Scan code to virtual key conversion table (scancodes with E0 prefix)
//---------------------------------------------------------------------------

static VSC_VK scancode_to_vk_e0[] = {
    {0x10, VK_MEDIA_PREV_TRACK | KBDEXT},
    {0x19, VK_MEDIA_NEXT_TRACK | KBDEXT},
    {0x1D, VK_RCONTROL | KBDEXT},
    {0x20, VK_VOLUME_MUTE | KBDEXT},
    {0x21, VK_LAUNCH_APP2 | KBDEXT},
    {0x22, VK_MEDIA_PLAY_PAUSE | KBDEXT},
    {0x24, VK_MEDIA_STOP | KBDEXT},
    {0x2E, VK_VOLUME_DOWN | KBDEXT},
    {0x30, VK_VOLUME_UP | KBDEXT},
    {0x32, VK_BROWSER_HOME | KBDEXT},
    {0x35, VK_DIVIDE | KBDEXT},
    {0x37, VK_SNAPSHOT | KBDEXT},
    {0x38, VK_RMENU | KBDEXT},
    {0x47, VK_HOME | KBDEXT},
    {0x48, VK_UP | KBDEXT},
    {0x49, VK_PRIOR | KBDEXT},
    {0x4B, VK_LEFT | KBDEXT},
    {0x4D, VK_RIGHT | KBDEXT},
    {0x4F, VK_END | KBDEXT},
    {0x50, VK_DOWN | KBDEXT},
    {0x51, VK_NEXT | KBDEXT},
    {0x52, VK_INSERT | KBDEXT},
    {0x53, VK_DELETE | KBDEXT},
    {0x5B, VK_LWIN | KBDEXT},
    {0x5C, VK_RWIN | KBDEXT},
    {0x5D, VK_APPS | KBDEXT},
    {0x5F, VK_SLEEP | KBDEXT},
    {0x65, VK_BROWSER_SEARCH | KBDEXT},
    {0x66, VK_BROWSER_FAVORITES | KBDEXT},
    {0x67, VK_BROWSER_REFRESH | KBDEXT},
    {0x68, VK_BROWSER_STOP | KBDEXT},
    {0x69, VK_BROWSER_FORWARD | KBDEXT},
    {0x6A, VK_BROWSER_BACK | KBDEXT},
    {0x6B, VK_LAUNCH_APP1 | KBDEXT},
    {0x6C, VK_LAUNCH_MAIL | KBDEXT},
    {0x6D, VK_LAUNCH_MEDIA_SELECT | KBDEXT},
    {0x1C, VK_RETURN | KBDEXT},
    {0x46, VK_CANCEL | KBDEXT},
    {0x00, 0x0000}
};

//---------------------------------------------------------------------------
// Scan code to virtual key conversion table (scancodes with E1 prefix)
//---------------------------------------------------------------------------

static VSC_VK scancode_to_vk_e1[] = {
    {0x1D, VK_PAUSE},
    {0x00, 0x0000}
};

//---------------------------------------------------------------------------
// Associate a virtual key with a modifier bitmask
//---------------------------------------------------------------------------

static VK_TO_BIT vk_to_bits[] = {
    {VK_SHIFT,   KBDSHIFT},
    {VK_CONTROL, KBDCTRL},
    {VK_MENU,    KBDALT},
    {0,          0}
};

//---------------------------------------------------------------------------
// Map character modifier bits to modification number
//---------------------------------------------------------------------------

static MODIFIERS char_modifiers = {
    .pVkToBit    = vk_to_bits,
    .wMaxModBits = 7,
    .ModNumber   = {
        0,            // 000 = <none>
        1,            // 001 = Shift
        2,            // 010 = Control
        SHFT_INVALID, // 011 = Shift Control
        SHFT_INVALID, // 100 = Alt
        SHFT_INVALID, // 101 = Shift Alt
        3,            // 110 = Control Alt (AltGr)
        4,            // 111 = Shift Control Alt (Shift AltGr)
    }
};

//---------------------------------------------------------------------------
// Virtual Key to WCHAR translations for 3 shift states
//---------------------------------------------------------------------------

static VK_TO_WCHARS3 vk_to_wchar3[] = {
    //                Base     Shift   Ctrl
    //                ----     -----   ----
    {VK_BACK,   0x00, {UC_BS,  UC_BS,  UC_DEL}},
    {VK_ESCAPE, 0x00, {UC_ESC, UC_ESC, UC_ESC}},
    {VK_RETURN, 0x00, {L'\r',  L'\r',  L'\n'}},
    {VK_CANCEL, 0x00, {UC_ETX, UC_ETX, UC_ETX}},
    {0,         0,    0,       0,      0}
};

//---------------------------------------------------------------------------
// Virtual Key to WCHAR translations for 5 shift states
//---------------------------------------------------------------------------

static VK_TO_WCHARS5 vk_to_wchar5[] = {
    //                                    Base       Shift     Ctrl      AltGr                  Shift/AltGr
    //                                    ----       -----     ----      -----                  -----------
    {'1',           0x00,                 {L'1',     L'!',     WCH_NONE, UC_INV_EXCL,           UC_SUP1}},
    {'2',           0x00,                 {L'2',     L'@',     WCH_NONE, UC_FORDINAL,           UC_SUP2}},
    {'3',           0x00,                 {L'3',     L'#',     WCH_NONE, UC_MORDINAL,           UC_SUP3}},
    {'4',           0x00,                 {L'4',     L'$',     WCH_NONE, UC_POUND,              UC_YEN}},
    {'5',           0x00,                 {L'5',     L'%',     WCH_NONE, UC_EURO,               UC_CENT}},
    {'6',           0x00,                 {L'6',     L'^',     WCH_NONE, WCH_DEAD,              WCH_DEAD}},
    {VK__none_,     0x00,                 {WCH_NONE, WCH_NONE, WCH_NONE, L'^',                  UC_CARON}},
    {'7',           0x00,                 {L'7',     L'&',     WCH_NONE, WCH_DEAD,              WCH_DEAD}},
    {VK__none_,     0x00,                 {WCH_NONE, WCH_NONE, WCH_NONE, 0x02DA,                UC_MACRON}},
    {'8',           0x00,                 {L'8',     L'*',     WCH_NONE, UC_D9_QUOT,            UC_S9_QUOT}},
    {'9',           0x00,                 {L'9',     L'(',     WCH_NONE, UC_D_LEFT_QUOT,        UC_S_LEFT_QUOT}},
    {'0',           0x00,                 {L'0',     L')',     WCH_NONE, UC_D_RIGHT_QUOT,       UC_S_RIGHT_QUOT}},
    {VK_OEM_MINUS,  0x00,                 {L'-',     L'_',     WCH_NONE, 0x2713,                0x2717}},
    {VK_OEM_PLUS,   0x00,                 {L'=',     L'+',     WCH_NONE, UC_MULTIPLICATION,     UC_DIVISION}},
    {'Q',           CAPLOK | CAPLOKALTGR, {L'q',     L'Q',     WCH_NONE, UC_LOWER_AE,           UC_UPPER_AE}},
    {'W',           CAPLOK | CAPLOKALTGR, {L'w',     L'W',     WCH_NONE, UC_LOWER_A_RING_ABOVE, UC_UPPER_A_RING_ABOVE}},
    {'E',           CAPLOK | CAPLOKALTGR, {L'e',     L'E',     WCH_NONE, UC_LOWER_E_DIAERESIS,  UC_UPPER_E_DIAERESIS}},
    {'R',           CAPLOK | CAPLOKALTGR, {L'r',     L'R',     WCH_NONE, UC_LOWER_Y_ACUTE,      UC_UPPER_Y_ACUTE}},
    {'T',           CAPLOK | CAPLOKALTGR, {L't',     L'T',     WCH_NONE, UC_LOWER_THORN,        UC_UPPER_THORN}},
    {'Y',           CAPLOK | CAPLOKALTGR, {L'y',     L'Y',     WCH_NONE, UC_LOWER_Y_DIAERESIS,  UC_UPPER_Y_DIAERESIS}},
    {'U',           CAPLOK | CAPLOKALTGR, {L'u',     L'U',     WCH_NONE, UC_LOWER_U_DIAERESIS,  UC_UPPER_U_DIAERESIS}},
    {'I',           CAPLOK | CAPLOKALTGR, {L'i',     L'I',     WCH_NONE, UC_LOWER_I_DIAERESIS,  UC_UPPER_I_DIAERESIS}},
    {'O',           CAPLOK | CAPLOKALTGR, {L'o',     L'O',     WCH_NONE, UC_LOWER_O_DIAERESIS,  UC_UPPER_O_DIAERESIS}},
    {'P',           CAPLOK | CAPLOKALTGR, {L'p',     L'P',     WCH_NONE, UC_LOWER_OE,           UC_UPPER_OE}},
    {VK_OEM_4,      0x00,                 {L'[',     L'{',     UC_ESC,   UC_DA_LEFT_QUOT,       UC_SA_LEFT_QUOT}},
    {VK_OEM_6,      0x00,                 {L']',     L'}',     UC_GS,    UC_DA_RIGHT_QUOT,      UC_SA_RIGHT_QUOT}},
    {'A',           CAPLOK | CAPLOKALTGR, {L'a',     L'A',     WCH_NONE, UC_LOWER_A_DIAERESIS,  UC_UPPER_A_DIAERESIS}},
    {'S',           CAPLOK | CAPLOKALTGR, {L's',     L'S',     WCH_NONE, UC_LOWER_SHARP_S,      0x1E9E}},
    {'D',           CAPLOK | CAPLOKALTGR, {L'd',     L'D',     WCH_NONE, UC_LOWER_D_STROKE,     UC_UPPER_D_STROKE}},
    {'F',           CAPLOK | CAPLOKALTGR, {L'f',     L'F',     WCH_NONE, UC_LOWER_E_GRAVE,      UC_UPPER_E_GRAVE}},
    {'G',           CAPLOK | CAPLOKALTGR, {L'g',     L'G',     WCH_NONE, UC_LOWER_E_ACUTE,      UC_UPPER_E_ACUTE}},
    {'H',           CAPLOK | CAPLOKALTGR, {L'h',     L'H',     WCH_NONE, UC_LOWER_U_GRAVE,      UC_UPPER_U_GRAVE}},
    {'J',           CAPLOK | CAPLOKALTGR, {L'j',     L'J',     WCH_NONE, UC_LOWER_U_ACUTE,      UC_UPPER_U_ACUTE}},
    {'K',           CAPLOK | CAPLOKALTGR, {L'k',     L'K',     WCH_NONE, 0x0133,                0x0132}},
    {'L',           CAPLOK | CAPLOKALTGR, {L'l',     L'L',     WCH_NONE, UC_LOWER_O_STROKE,     UC_UPPER_O_STROKE}},
    {VK_OEM_1,      0x00,                 {L';',     L':',     WCH_NONE, UC_DEGREE,             UC_MIDDOT}},
    {VK_OEM_7,      0x00,                 {L'\'',    L'"',     WCH_NONE, WCH_DEAD,              WCH_DEAD}},
    {VK__none_,     0x00,                 {WCH_NONE, WCH_NONE, WCH_NONE, UC_ACUTE,              UC_DIAERESIS}},
    {VK_OEM_3,      0x00,                 {L'`',     L'~',     WCH_NONE, WCH_DEAD,              WCH_DEAD}},
    {VK__none_,     0x00,                 {WCH_NONE, WCH_NONE, WCH_NONE, L'`',                  L'~'}},
    {VK_OEM_5,      0x00,                 {L'\\',    L'|',     UC_FS,    WCH_DEAD,              UC_BBAR}},
    {VK__none_,     0x00,                 {WCH_NONE, WCH_NONE, WCH_NONE, UC_NOT,                WCH_NONE}},
    {'Z',           CAPLOK | CAPLOKALTGR, {L'z',     L'Z',     WCH_NONE, UC_LOWER_A_GRAVE,      UC_UPPER_A_GRAVE}},
    {'X',           CAPLOK | CAPLOKALTGR, {L'x',     L'X',     WCH_NONE, UC_LOWER_A_ACUTE,      UC_UPPER_A_ACUTE}},
    {'C',           CAPLOK | CAPLOKALTGR, {L'c',     L'C',     WCH_NONE, UC_LOWER_C_CEDILLA,    UC_UPPER_C_CEDILLA}},
    {'V',           CAPLOK | CAPLOKALTGR, {L'v',     L'V',     WCH_NONE, UC_LOWER_I_GRAVE,      UC_UPPER_I_GRAVE}},
    {'B',           CAPLOK | CAPLOKALTGR, {L'b',     L'B',     WCH_NONE, UC_LOWER_I_ACUTE,      UC_UPPER_I_ACUTE}},
    {'N',           CAPLOK | CAPLOKALTGR, {L'n',     L'N',     WCH_NONE, UC_LOWER_N_TILDE,      UC_UPPER_N_TILDE}},
    {'M',           CAPLOK,               {L'm',     L'M',     WCH_NONE, WCH_DEAD,              WCH_DEAD}},
    {VK__none_,     0x00,                 {WCH_NONE, WCH_NONE, WCH_NONE, UC_LOWER_ALPHA,        L' '}},
    {VK_OEM_COMMA,  CAPLOKALTGR,          {L',',     L'<',     WCH_NONE, UC_LOWER_O_GRAVE,      UC_UPPER_O_GRAVE}},
    {VK_OEM_PERIOD, CAPLOKALTGR,          {L'.',     L'>',     WCH_NONE, UC_LOWER_O_ACUTE,      UC_UPPER_O_ACUTE}},
    {VK_OEM_2,      0x00,                 {L'/',     L'?',     WCH_NONE, UC_INV_QUESTION,       UC_ELLIPSIS}},
    {VK_SPACE,      0x00,                 {L' ',     L' ',     L' ',     WCH_NONE,              WCH_NONE}},
    {VK_OEM_102,    0x00,                 {L'\\',    L'|',     UC_FS,    WCH_NONE,              WCH_NONE}},
    {VK_DECIMAL,    0x00,                 {L'.',     L',',     WCH_NONE, L',',                  L','}},
    {0,             0,                    0,         0,        0,        0,                     0}
};

//---------------------------------------------------------------------------
// Virtual Key to WCHAR translations for 2 shift states
//---------------------------------------------------------------------------

static VK_TO_WCHARS2 vk_to_wchar2[] = {
    //                  Base    Shift
    //                  ----    -----
    {VK_TAB,      0x00, {L'\t', L'\t'}},
    {VK_ADD,      0x00, {L'+',  L'+'}},
    {VK_DIVIDE,   0x00, {L'/',  L'/'}},
    {VK_MULTIPLY, 0x00, {L'*',  L'*'}},
    {VK_SUBTRACT, 0x00, {L'-',  L'-'}},
    {0,           0,    0,      0}
};

//---------------------------------------------------------------------------
// Virtual Key to WCHAR translations for 1 shift states
//---------------------------------------------------------------------------

static VK_TO_WCHARS1 vk_to_wchar1[] = {
    //                 Base
    //                 ----
    {VK_NUMPAD0, 0x00, {L'0'}},
    {VK_NUMPAD1, 0x00, {L'1'}},
    {VK_NUMPAD2, 0x00, {L'2'}},
    {VK_NUMPAD3, 0x00, {L'3'}},
    {VK_NUMPAD4, 0x00, {L'4'}},
    {VK_NUMPAD5, 0x00, {L'5'}},
    {VK_NUMPAD6, 0x00, {L'6'}},
    {VK_NUMPAD7, 0x00, {L'7'}},
    {VK_NUMPAD8, 0x00, {L'8'}},
    {VK_NUMPAD9, 0x00, {L'9'}},
    {0,          0,    0}
};

//---------------------------------------------------------------------------
// Virtual Key to WCHAR translations with shift states
//---------------------------------------------------------------------------

static VK_TO_WCHAR_TABLE vk_to_wchar[] = {
    {(PVK_TO_WCHARS1)vk_to_wchar3, 3, sizeof(vk_to_wchar3[0])},
    {(PVK_TO_WCHARS1)vk_to_wchar5, 5, sizeof(vk_to_wchar5[0])},
    {(PVK_TO_WCHARS1)vk_to_wchar2, 2, sizeof(vk_to_wchar2[0])},
    {(PVK_TO_WCHARS1)vk_to_wchar1, 1, sizeof(vk_to_wchar1[0])},
    {NULL,                         0, 0}
};

//---------------------------------------------------------------------------
// Dead keys sequences translations
//---------------------------------------------------------------------------

static DEADKEY dead_keys[] = {
    //                              Accent          Composed               Flags
    //                              ------          --------               -----
    DEADTRANS(L'a',                 L'^',           UC_LOWER_A_CIRCUMFLEX, 0x0000),
    DEADTRANS(L'w',                 L'^',           UC_LOWER_W_CIRCUMFLEX, 0x0000),
    DEADTRANS(L'e',                 L'^',           UC_LOWER_E_CIRCUMFLEX, 0x0000),
    DEADTRANS(L'u',                 L'^',           UC_LOWER_U_CIRCUMFLEX, 0x0000),
    DEADTRANS(L'i',                 L'^',           UC_LOWER_I_CIRCUMFLEX, 0x0000),
    DEADTRANS(L'y',                 L'^',           UC_LOWER_Y_CIRCUMFLEX, 0x0000),
    DEADTRANS(L'o',                 L'^',           UC_LOWER_O_CIRCUMFLEX, 0x0000),
    DEADTRANS(L'A',                 L'^',           UC_UPPER_A_CIRCUMFLEX, 0x0000),
    DEADTRANS(L'W',                 L'^',           UC_UPPER_W_CIRCUMFLEX, 0x0000),
    DEADTRANS(L'E',                 L'^',           UC_UPPER_E_CIRCUMFLEX, 0x0000),
    DEADTRANS(L'U',                 L'^',           UC_UPPER_U_CIRCUMFLEX, 0x0000),
    DEADTRANS(L'I',                 L'^',           UC_UPPER_I_CIRCUMFLEX, 0x0000),
    DEADTRANS(L'Y',                 L'^',           UC_UPPER_Y_CIRCUMFLEX, 0x0000),
    DEADTRANS(L'O',                 L'^',           UC_UPPER_O_CIRCUMFLEX, 0x0000),
    DEADTRANS(L' ',                 L'^',           L'^',                  0x0000),
    DEADTRANS(L'n',                 UC_CARON,       UC_LOWER_N_CARON,      0x0000),
    DEADTRANS(L'c',                 UC_CARON,       UC_LOWER_C_CARON,      0x0000),
    DEADTRANS(L'z',                 UC_CARON,       UC_LOWER_Z_CARON,      0x0000),
    DEADTRANS(L'a',                 UC_CARON,       0x01CE,                0x0000),
    DEADTRANS(L'h',                 UC_CARON,       0x021F,                0x0000),
    DEADTRANS(L'j',                 UC_CARON,       0x01F0,                0x0000),
    DEADTRANS(L'g',                 UC_CARON,       0x01E7,                0x0000),
    DEADTRANS(L'd',                 UC_CARON,       UC_LOWER_D_CARON,      0x0000),
    DEADTRANS(L's',                 UC_CARON,       UC_LOWER_S_CARON,      0x0000),
    DEADTRANS(L'l',                 UC_CARON,       UC_LOWER_L_CARON,      0x0000),
    DEADTRANS(L'k',                 UC_CARON,       0x01E9,                0x0000),
    DEADTRANS(L'e',                 UC_CARON,       UC_LOWER_E_CARON,      0x0000),
    DEADTRANS(L'r',                 UC_CARON,       UC_LOWER_R_CARON,      0x0000),
    DEADTRANS(L'u',                 UC_CARON,       0x01D4,                0x0000),
    DEADTRANS(L'i',                 UC_CARON,       0x01D0,                0x0000),
    DEADTRANS(L't',                 UC_CARON,       UC_LOWER_T_CARON,      0x0000),
    DEADTRANS(L'o',                 UC_CARON,       0x01D2,                0x0000),
    DEADTRANS(L'3',                 UC_CARON,       0x01EF,                0x0000),
    DEADTRANS(L'N',                 UC_CARON,       UC_UPPER_N_CARON,      0x0000),
    DEADTRANS(L'C',                 UC_CARON,       UC_UPPER_C_CARON,      0x0000),
    DEADTRANS(L'Z',                 UC_CARON,       UC_UPPER_Z_CARON,      0x0000),
    DEADTRANS(L'A',                 UC_CARON,       0x01CD,                0x0000),
    DEADTRANS(L'H',                 UC_CARON,       0x021E,                0x0000),
    DEADTRANS(L'G',                 UC_CARON,       0x01E6,                0x0000),
    DEADTRANS(L'D',                 UC_CARON,       UC_UPPER_D_CARON,      0x0000),
    DEADTRANS(L'S',                 UC_CARON,       UC_UPPER_S_CARON,      0x0000),
    DEADTRANS(L'L',                 UC_CARON,       UC_UPPER_L_CARON,      0x0000),
    DEADTRANS(L'K',                 UC_CARON,       0x01E8,                0x0000),
    DEADTRANS(L'E',                 UC_CARON,       UC_UPPER_E_CARON,      0x0000),
    DEADTRANS(L'R',                 UC_CARON,       UC_UPPER_R_CARON,      0x0000),
    DEADTRANS(L'U',                 UC_CARON,       0x01D3,                0x0000),
    DEADTRANS(L'I',                 UC_CARON,       0x01CF,                0x0000),
    DEADTRANS(L'T',                 UC_CARON,       UC_UPPER_T_CARON,      0x0000),
    DEADTRANS(L'O',                 UC_CARON,       0x01D1,                0x0000),
    DEADTRANS(L'#',                 UC_CARON,       0x01EE,                0x0000),
    DEADTRANS(UC_LOWER_D_STROKE,    UC_CARON,       0x01C6,                0x0000),
    DEADTRANS(UC_LOWER_U_DIAERESIS, UC_CARON,       0x01DA,                0x0000),
    DEADTRANS(UC_UPPER_D_STROKE,    UC_CARON,       0x01C5,                0x0000),
    DEADTRANS(UC_UPPER_U_DIAERESIS, UC_CARON,       0x01D9,                0x0000),
    DEADTRANS(L' ',                 UC_CARON,       UC_CARON,              0x0000),
    DEADTRANS(L'c',                 0x02DA,         UC_LOWER_C_DOT_ABOVE,  0x0000),
    DEADTRANS(L'z',                 0x02DA,         UC_LOWER_Z_DOT_ABOVE,  0x0000),
    DEADTRANS(L'a',                 0x02DA,         UC_LOWER_A_RING_ABOVE, 0x0000),
    DEADTRANS(L'g',                 0x02DA,         UC_LOWER_G_DOT_ABOVE,  0x0000),
    DEADTRANS(L'C',                 0x02DA,         UC_UPPER_C_DOT_ABOVE,  0x0000),
    DEADTRANS(L'Z',                 0x02DA,         UC_UPPER_Z_DOT_ABOVE,  0x0000),
    DEADTRANS(L'A',                 0x02DA,         UC_UPPER_A_RING_ABOVE, 0x0000),
    DEADTRANS(L'G',                 0x02DA,         UC_UPPER_G_DOT_ABOVE,  0x0000),
    DEADTRANS(L' ',                 0x02DA,         0x02DA,                0x0000),
    DEADTRANS(L'b',                 UC_MACRON,      0x0180,                0x0000),
    DEADTRANS(L'a',                 UC_MACRON,      UC_LOWER_A_MACRON,     0x0000),
    DEADTRANS(L'h',                 UC_MACRON,      UC_LOWER_H_STROKE,     0x0000),
    DEADTRANS(L'd',                 UC_MACRON,      UC_LOWER_D_STROKE,     0x0000),
    DEADTRANS(L'l',                 UC_MACRON,      0x1E3B,                0x0000),
    DEADTRANS(L'e',                 UC_MACRON,      UC_LOWER_E_MACRON,     0x0000),
    DEADTRANS(L'u',                 UC_MACRON,      UC_LOWER_U_MACRON,     0x0000),
    DEADTRANS(L'i',                 UC_MACRON,      UC_LOWER_I_MACRON,     0x0000),
    DEADTRANS(L't',                 UC_MACRON,      UC_LOWER_T_STROKE,     0x0000),
    DEADTRANS(L'o',                 UC_MACRON,      UC_LOWER_O_MACRON,     0x0000),
    DEADTRANS(L'2',                 UC_MACRON,      UC_EN_DASH,            0x0000),
    DEADTRANS(L'3',                 UC_MACRON,      UC_EM_DASH,            0x0000),
    DEADTRANS(L'1',                 UC_MACRON,      0x2010,                0x0000),
    DEADTRANS(L'B',                 UC_MACRON,      0x0243,                0x0000),
    DEADTRANS(L'A',                 UC_MACRON,      UC_UPPER_A_MACRON,     0x0000),
    DEADTRANS(L'H',                 UC_MACRON,      UC_UPPER_H_STROKE,     0x0000),
    DEADTRANS(L'D',                 UC_MACRON,      UC_UPPER_D_STROKE,     0x0000),
    DEADTRANS(L'L',                 UC_MACRON,      0x1E3A,                0x0000),
    DEADTRANS(L'E',                 UC_MACRON,      UC_UPPER_E_MACRON,     0x0000),
    DEADTRANS(L'U',                 UC_MACRON,      UC_UPPER_U_MACRON,     0x0000),
    DEADTRANS(L'I',                 UC_MACRON,      UC_UPPER_I_MACRON,     0x0000),
    DEADTRANS(L'T',                 UC_MACRON,      UC_UPPER_T_STROKE,     0x0000),
    DEADTRANS(L'O',                 UC_MACRON,      UC_UPPER_O_MACRON,     0x0000),
    DEADTRANS(L' ',                 UC_MACRON,      UC_MACRON,             0x0000),
    DEADTRANS(L'b',                 UC_ACUTE,       0x0253,                0x0000),
    DEADTRANS(L'n',                 UC_ACUTE,       UC_LOWER_N_ACUTE,      0x0000),
    DEADTRANS(L'c',                 UC_ACUTE,       UC_LOWER_C_ACUTE,      0x0000),
    DEADTRANS(L'z',                 UC_ACUTE,       UC_LOWER_Z_ACUTE,      0x0000),
    DEADTRANS(L'a',                 UC_ACUTE,       UC_LOWER_A_ACUTE,      0x0000),
    DEADTRANS(L's',                 UC_ACUTE,       UC_LOWER_S_ACUTE,      0x0000),
    DEADTRANS(L'l',                 UC_ACUTE,       UC_LOWER_L_STROKE,     0x0000),
    DEADTRANS(L'e',                 UC_ACUTE,       UC_LOWER_E_ACUTE,      0x0000),
    DEADTRANS(L'r',                 UC_ACUTE,       UC_LOWER_R_ACUTE,      0x0000),
    DEADTRANS(L'u',                 UC_ACUTE,       UC_LOWER_U_ACUTE,      0x0000),
    DEADTRANS(L'i',                 UC_ACUTE,       UC_LOWER_I_ACUTE,      0x0000),
    DEADTRANS(L'y',                 UC_ACUTE,       UC_LOWER_Y_ACUTE,      0x0000),
    DEADTRANS(L'o',                 UC_ACUTE,       UC_LOWER_O_ACUTE,      0x0000),
    DEADTRANS(L'B',                 UC_ACUTE,       0x0181,                0x0000),
    DEADTRANS(L'N',                 UC_ACUTE,       UC_UPPER_N_ACUTE,      0x0000),
    DEADTRANS(L'C',                 UC_ACUTE,       UC_UPPER_C_ACUTE,      0x0000),
    DEADTRANS(L'Z',                 UC_ACUTE,       UC_UPPER_Z_ACUTE,      0x0000),
    DEADTRANS(L'A',                 UC_ACUTE,       UC_UPPER_A_ACUTE,      0x0000),
    DEADTRANS(L'S',                 UC_ACUTE,       UC_UPPER_S_ACUTE,      0x0000),
    DEADTRANS(L'L',                 UC_ACUTE,       UC_UPPER_L_STROKE,     0x0000),
    DEADTRANS(L'E',                 UC_ACUTE,       UC_UPPER_E_ACUTE,      0x0000),
    DEADTRANS(L'R',                 UC_ACUTE,       UC_UPPER_R_ACUTE,      0x0000),
    DEADTRANS(L'U',                 UC_ACUTE,       UC_UPPER_U_ACUTE,      0x0000),
    DEADTRANS(L'I',                 UC_ACUTE,       UC_UPPER_I_ACUTE,      0x0000),
    DEADTRANS(L'Y',                 UC_ACUTE,       UC_UPPER_Y_ACUTE,      0x0000),
    DEADTRANS(L'O',                 UC_ACUTE,       UC_UPPER_O_ACUTE,      0x0000),
    DEADTRANS(L' ',                 UC_ACUTE,       UC_ACUTE,              0x0000),
    DEADTRANS(L'x',                 UC_DIAERESIS,   0x1E8D,                0x0000),
    DEADTRANS(L'a',                 UC_DIAERESIS,   UC_LOWER_A_DIAERESIS,  0x0000),
    DEADTRANS(L'h',                 UC_DIAERESIS,   0x1E27,                0x0000),
    DEADTRANS(L'w',                 UC_DIAERESIS,   UC_LOWER_W_DIAERESIS,  0x0000),
    DEADTRANS(L'e',                 UC_DIAERESIS,   UC_LOWER_E_DIAERESIS,  0x0000),
    DEADTRANS(L'u',                 UC_DIAERESIS,   UC_LOWER_U_DIAERESIS,  0x0000),
    DEADTRANS(L'i',                 UC_DIAERESIS,   UC_LOWER_I_DIAERESIS,  0x0000),
    DEADTRANS(L't',                 UC_DIAERESIS,   0x1E97,                0x0000),
    DEADTRANS(L'y',                 UC_DIAERESIS,   UC_LOWER_Y_DIAERESIS,  0x0000),
    DEADTRANS(L'o',                 UC_DIAERESIS,   UC_LOWER_O_DIAERESIS,  0x0000),
    DEADTRANS(L'X',                 UC_DIAERESIS,   0x1E8C,                0x0000),
    DEADTRANS(L'A',                 UC_DIAERESIS,   UC_UPPER_A_DIAERESIS,  0x0000),
    DEADTRANS(L'H',                 UC_DIAERESIS,   0x1E26,                0x0000),
    DEADTRANS(L'W',                 UC_DIAERESIS,   UC_UPPER_W_DIAERESIS,  0x0000),
    DEADTRANS(L'E',                 UC_DIAERESIS,   UC_UPPER_E_DIAERESIS,  0x0000),
    DEADTRANS(L'U',                 UC_DIAERESIS,   UC_UPPER_U_DIAERESIS,  0x0000),
    DEADTRANS(L'I',                 UC_DIAERESIS,   UC_UPPER_I_DIAERESIS,  0x0000),
    DEADTRANS(L'Y',                 UC_DIAERESIS,   UC_UPPER_Y_DIAERESIS,  0x0000),
    DEADTRANS(L'O',                 UC_DIAERESIS,   UC_UPPER_O_DIAERESIS,  0x0000),
    DEADTRANS(L' ',                 UC_DIAERESIS,   UC_DIAERESIS,          0x0000),
    DEADTRANS(L'a',                 L'`',           UC_LOWER_A_GRAVE,      0x0000),
    DEADTRANS(L'e',                 L'`',           UC_LOWER_E_GRAVE,      0x0000),
    DEADTRANS(L'u',                 L'`',           UC_LOWER_U_GRAVE,      0x0000),
    DEADTRANS(L'i',                 L'`',           UC_LOWER_I_GRAVE,      0x0000),
    DEADTRANS(L'o',                 L'`',           UC_LOWER_O_GRAVE,      0x0000),
    DEADTRANS(L'A',                 L'`',           UC_UPPER_A_GRAVE,      0x0000),
    DEADTRANS(L'E',                 L'`',           UC_UPPER_E_GRAVE,      0x0000),
    DEADTRANS(L'U',                 L'`',           UC_UPPER_U_GRAVE,      0x0000),
    DEADTRANS(L'I',                 L'`',           UC_UPPER_I_GRAVE,      0x0000),
    DEADTRANS(L'O',                 L'`',           UC_UPPER_O_GRAVE,      0x0000),
    DEADTRANS(UC_LOWER_A_DIAERESIS, L'`',           UC_LOWER_A_OGONEK,     0x0000),
    DEADTRANS(UC_LOWER_E_DIAERESIS, L'`',           UC_LOWER_E_OGONEK,     0x0000),
    DEADTRANS(UC_LOWER_U_DIAERESIS, L'`',           UC_LOWER_U_OGONEK,     0x0000),
    DEADTRANS(UC_LOWER_I_DIAERESIS, L'`',           UC_LOWER_I_OGONEK,     0x0000),
    DEADTRANS(UC_LOWER_O_DIAERESIS, L'`',           0x01EB,                0x0000),
    DEADTRANS(UC_UPPER_A_DIAERESIS, L'`',           UC_UPPER_A_OGONEK,     0x0000),
    DEADTRANS(UC_UPPER_E_DIAERESIS, L'`',           UC_UPPER_E_OGONEK,     0x0000),
    DEADTRANS(UC_UPPER_U_DIAERESIS, L'`',           UC_UPPER_U_OGONEK,     0x0000),
    DEADTRANS(UC_UPPER_I_DIAERESIS, L'`',           UC_UPPER_I_OGONEK,     0x0000),
    DEADTRANS(UC_UPPER_O_DIAERESIS, L'`',           0x01EA,                0x0000),
    DEADTRANS(L' ',                 L'`',           L'`',                  0x0000),
    DEADTRANS(L'n',                 L'~',           UC_LOWER_N_TILDE,      0x0000),
    DEADTRANS(L'a',                 L'~',           UC_LOWER_A_TILDE,      0x0000),
    DEADTRANS(L'o',                 L'~',           UC_LOWER_O_TILDE,      0x0000),
    DEADTRANS(L'N',                 L'~',           UC_UPPER_N_TILDE,      0x0000),
    DEADTRANS(L'A',                 L'~',           UC_UPPER_A_TILDE,      0x0000),
    DEADTRANS(L'O',                 L'~',           UC_UPPER_O_TILDE,      0x0000),
    DEADTRANS(L' ',                 L'~',           L'~',                  0x0000),
    DEADTRANS(L'=',                 UC_NOT,         UC_LEFT_RIGHT_ARROW,   0x0000),
    DEADTRANS(L'n',                 UC_NOT,         0x2199,                0x0000),
    DEADTRANS(L'c',                 UC_NOT,         UC_COPYRIGHT,          0x0000),
    DEADTRANS(L'm',                 UC_NOT,         0x2198,                0x0000),
    DEADTRANS(L'h',                 UC_NOT,         UC_LEFT_ARROW,         0x0000),
    DEADTRANS(L'j',                 UC_NOT,         UC_DOWNW_ARROW,        0x0000),
    DEADTRANS(L's',                 UC_NOT,         UC_SECTION,            0x0000),
    DEADTRANS(L'l',                 UC_NOT,         UC_RIGHT_ARROW,        0x0000),
    DEADTRANS(L'k',                 UC_NOT,         UC_UP_ARROW,           0x0000),
    DEADTRANS(L'r',                 UC_NOT,         UC_REGISTERED,         0x0000),
    DEADTRANS(L'p',                 UC_NOT,         0x2117,                0x0000),
    DEADTRANS(L'u',                 UC_NOT,         0x2196,                0x0000),
    DEADTRANS(L'i',                 UC_NOT,         0x2197,                0x0000),
    DEADTRANS(L't',                 UC_NOT,         UC_TRADE,              0x0000),
    DEADTRANS(L'6',                 UC_NOT,         UC_FRAC_3_4,           0x0000),
    DEADTRANS(L'4',                 UC_NOT,         UC_FRAC_1_4,           0x0000),
    DEADTRANS(L'5',                 UC_NOT,         0x2154,                0x0000),
    DEADTRANS(L'2',                 UC_NOT,         UC_FRAC_1_2,           0x0000),
    DEADTRANS(L'3',                 UC_NOT,         0x2153,                0x0000),
    DEADTRANS(L'1',                 UC_NOT,         UC_NUMERO,             0x0000),
    DEADTRANS(L'+',                 UC_NOT,         UC_LEFT_RIGHT_DARROW,  0x0000),
    DEADTRANS(L'N',                 UC_NOT,         0x21D9,                0x0000),
    DEADTRANS(L'M',                 UC_NOT,         0x21D8,                0x0000),
    DEADTRANS(L'H',                 UC_NOT,         UC_LEFT_DARROW,        0x0000),
    DEADTRANS(L'J',                 UC_NOT,         UC_DOWN_DARROW,        0x0000),
    DEADTRANS(L'L',                 UC_NOT,         UC_RIGHT_DARROW,       0x0000),
    DEADTRANS(L'K',                 UC_NOT,         UC_UP_DARROW,          0x0000),
    DEADTRANS(L'U',                 UC_NOT,         0x21D6,                0x0000),
    DEADTRANS(L'I',                 UC_NOT,         0x21D7,                0x0000),
    DEADTRANS(L'T',                 UC_NOT,         0x2120,                0x0000),
    DEADTRANS(L' ',                 UC_NOT,         UC_NOT,                0x0000),
    DEADTRANS(L'=',                 UC_LOWER_ALPHA, 0x207C,                0x0000),
    DEADTRANS(L'b',                 UC_LOWER_ALPHA, UC_LOWER_BETA,         0x0000),
    DEADTRANS(L'n',                 UC_LOWER_ALPHA, UC_LOWER_NU,           0x0000),
    DEADTRANS(L'v',                 UC_LOWER_ALPHA, UC_LOWER_BETA,         0x0000),
    DEADTRANS(L'c',                 UC_LOWER_ALPHA, UC_LOWER_CHI,          0x0000),
    DEADTRANS(L'x',                 UC_LOWER_ALPHA, UC_LOWER_XI,           0x0000),
    DEADTRANS(L'z',                 UC_LOWER_ALPHA, UC_LOWER_ZETA,         0x0000),
    DEADTRANS(L'm',                 UC_LOWER_ALPHA, UC_LOWER_MU,           0x0000),
    DEADTRANS(L'a',                 UC_LOWER_ALPHA, UC_LOWER_ALPHA,        0x0000),
    DEADTRANS(L'h',                 UC_LOWER_ALPHA, UC_LOWER_THETA,        0x0000),
    DEADTRANS(L'j',                 UC_LOWER_ALPHA, UC_LOWER_IOTA,         0x0000),
    DEADTRANS(L'g',                 UC_LOWER_ALPHA, UC_LOWER_GAMMA,        0x0000),
    DEADTRANS(L'f',                 UC_LOWER_ALPHA, UC_LOWER_PHI,          0x0000),
    DEADTRANS(L'd',                 UC_LOWER_ALPHA, UC_LOWER_DELTA,        0x0000),
    DEADTRANS(L';',                 UC_LOWER_ALPHA, 0x208B,                0x0000),
    DEADTRANS(L'\'',                UC_LOWER_ALPHA, 0x208C,                0x0000),
    DEADTRANS(L's',                 UC_LOWER_ALPHA, UC_LOWER_SIGMA,        0x0000),
    DEADTRANS(L'l',                 UC_LOWER_ALPHA, UC_LOWER_LAMDA,        0x0000),
    DEADTRANS(L'k',                 UC_LOWER_ALPHA, UC_LOWER_KAPPA,        0x0000),
    DEADTRANS(L'w',                 UC_LOWER_ALPHA, UC_LOWER_PSI,          0x0000),
    DEADTRANS(L'e',                 UC_LOWER_ALPHA, UC_LOWER_EPSILON,      0x0000),
    DEADTRANS(L'r',                 UC_LOWER_ALPHA, UC_LOWER_RHO,          0x0000),
    DEADTRANS(L'[',                 UC_LOWER_ALPHA, 0x207D,                0x0000),
    DEADTRANS(L'p',                 UC_LOWER_ALPHA, UC_LOWER_PI,           0x0000),
    DEADTRANS(L'u',                 UC_LOWER_ALPHA, UC_LOWER_OMEGA,        0x0000),
    DEADTRANS(L']',                 UC_LOWER_ALPHA, 0x207E,                0x0000),
    DEADTRANS(L'i',                 UC_LOWER_ALPHA, UC_LOWER_ETA,          0x0000),
    DEADTRANS(L't',                 UC_LOWER_ALPHA, UC_LOWER_TAU,          0x0000),
    DEADTRANS(L'y',                 UC_LOWER_ALPHA, UC_LOWER_UPSILON,      0x0000),
    DEADTRANS(L'o',                 UC_LOWER_ALPHA, UC_LOWER_OMICRON,      0x0000),
    DEADTRANS(L'q',                 UC_LOWER_ALPHA, UC_LOWER_OMEGA,        0x0000),
    DEADTRANS(L'8',                 UC_LOWER_ALPHA, 0x2078,                0x0000),
    DEADTRANS(L'9',                 UC_LOWER_ALPHA, 0x2079,                0x0000),
    DEADTRANS(L'0',                 UC_LOWER_ALPHA, 0x2070,                0x0000),
    DEADTRANS(L'-',                 UC_LOWER_ALPHA, 0x207B,                0x0000),
    DEADTRANS(L'6',                 UC_LOWER_ALPHA, 0x2076,                0x0000),
    DEADTRANS(L'7',                 UC_LOWER_ALPHA, 0x2077,                0x0000),
    DEADTRANS(L'4',                 UC_LOWER_ALPHA, 0x2074,                0x0000),
    DEADTRANS(L'5',                 UC_LOWER_ALPHA, 0x2075,                0x0000),
    DEADTRANS(L'2',                 UC_LOWER_ALPHA, UC_SUP2,               0x0000),
    DEADTRANS(L'3',                 UC_LOWER_ALPHA, UC_SUP3,               0x0000),
    DEADTRANS(L'1',                 UC_LOWER_ALPHA, UC_SUP1,               0x0000),
    DEADTRANS(L'+',                 UC_LOWER_ALPHA, 0x207A,                0x0000),
    DEADTRANS(L'B',                 UC_LOWER_ALPHA, UC_UPPER_BETA,         0x0000),
    DEADTRANS(L'N',                 UC_LOWER_ALPHA, UC_UPPER_NU,           0x0000),
    DEADTRANS(L'V',                 UC_LOWER_ALPHA, UC_UPPER_BETA,         0x0000),
    DEADTRANS(L'C',                 UC_LOWER_ALPHA, UC_UPPER_CHI,          0x0000),
    DEADTRANS(L'X',                 UC_LOWER_ALPHA, UC_UPPER_XI,           0x0000),
    DEADTRANS(L'Z',                 UC_LOWER_ALPHA, UC_UPPER_ZETA,         0x0000),
    DEADTRANS(L'M',                 UC_LOWER_ALPHA, UC_UPPER_MU,           0x0000),
    DEADTRANS(L'A',                 UC_LOWER_ALPHA, UC_UPPER_ALPHA,        0x0000),
    DEADTRANS(L'H',                 UC_LOWER_ALPHA, UC_UPPER_THETA,        0x0000),
    DEADTRANS(L'J',                 UC_LOWER_ALPHA, UC_UPPER_IOTA,         0x0000),
    DEADTRANS(L'G',                 UC_LOWER_ALPHA, UC_UPPER_GAMMA,        0x0000),
    DEADTRANS(L'F',                 UC_LOWER_ALPHA, UC_UPPER_PHI,          0x0000),
    DEADTRANS(L'D',                 UC_LOWER_ALPHA, UC_UPPER_DELTA,        0x0000),
    DEADTRANS(L'"',                 UC_LOWER_ALPHA, 0x208A,                0x0000),
    DEADTRANS(L'S',                 UC_LOWER_ALPHA, UC_UPPER_SIGMA,        0x0000),
    DEADTRANS(L'L',                 UC_LOWER_ALPHA, UC_UPPER_LAMDA,        0x0000),
    DEADTRANS(L'K',                 UC_LOWER_ALPHA, UC_UPPER_KAPPA,        0x0000),
    DEADTRANS(L'W',                 UC_LOWER_ALPHA, UC_UPPER_PSI,          0x0000),
    DEADTRANS(L'E',                 UC_LOWER_ALPHA, UC_UPPER_EPSILON,      0x0000),
    DEADTRANS(L'R',                 UC_LOWER_ALPHA, UC_UPPER_RHO,          0x0000),
    DEADTRANS(L'{',                 UC_LOWER_ALPHA, 0x208D,                0x0000),
    DEADTRANS(L'P',                 UC_LOWER_ALPHA, UC_UPPER_PI,           0x0000),
    DEADTRANS(L'U',                 UC_LOWER_ALPHA, UC_UPPER_OMEGA,        0x0000),
    DEADTRANS(L'}',                 UC_LOWER_ALPHA, 0x208E,                0x0000),
    DEADTRANS(L'I',                 UC_LOWER_ALPHA, UC_UPPER_ETA,          0x0000),
    DEADTRANS(L'T',                 UC_LOWER_ALPHA, UC_UPPER_TAU,          0x0000),
    DEADTRANS(L'Y',                 UC_LOWER_ALPHA, UC_UPPER_UPSILON,      0x0000),
    DEADTRANS(L'O',                 UC_LOWER_ALPHA, UC_UPPER_OMICRON,      0x0000),
    DEADTRANS(L'Q',                 UC_LOWER_ALPHA, UC_UPPER_OMEGA,        0x0000),
    DEADTRANS(L'*',                 UC_LOWER_ALPHA, 0x2088,                0x0000),
    DEADTRANS(L'(',                 UC_LOWER_ALPHA, 0x2089,                0x0000),
    DEADTRANS(L')',                 UC_LOWER_ALPHA, 0x2080,                0x0000),
    DEADTRANS(L'^',                 UC_LOWER_ALPHA, 0x2086,                0x0000),
    DEADTRANS(L'&',                 UC_LOWER_ALPHA, 0x2087,                0x0000),
    DEADTRANS(L'$',                 UC_LOWER_ALPHA, 0x2084,                0x0000),
    DEADTRANS(L'%',                 UC_LOWER_ALPHA, 0x2085,                0x0000),
    DEADTRANS(L'@',                 UC_LOWER_ALPHA, 0x2082,                0x0000),
    DEADTRANS(L'#',                 UC_LOWER_ALPHA, 0x2083,                0x0000),
    DEADTRANS(L'!',                 UC_LOWER_ALPHA, 0x2081,                0x0000),
    DEADTRANS(L'^',                 UC_LOWER_ALPHA, 0x2086,                0x0000),
    DEADTRANS(L' ',                 UC_LOWER_ALPHA, UC_LOWER_MU,           0x0000),
    DEADTRANS(L'=',                 L' ',           0x225D,                0x0000),
    DEADTRANS(L'b',                 L' ',           UC_SUBSET_EQUAL,       0x0000),
    DEADTRANS(L'n',                 L' ',           0x207F,                0x0000),
    DEADTRANS(L'c',                 L' ',           UC_PROPORTIONAL,       0x0000),
    DEADTRANS(L'.',                 L' ',           UC_DOT_OPERATOR,       0x0000),
    DEADTRANS(L'z',                 L' ',           0x21AF,                0x0000),
    DEADTRANS(L'm',                 L' ',           UC_ELEMENT,            0x0000),
    DEADTRANS(L'h',                 L' ',           UC_NOT_SUBSET,         0x0000),
    DEADTRANS(L'g',                 L' ',           UC_SUBSET,             0x0000),
    DEADTRANS(L'f',                 L' ',           UC_LATIN_SMALL_F_HOOK, 0x0000),
    DEADTRANS(L'd',                 L' ',           UC_UPPER_DELTA,        0x0000),
    DEADTRANS(L';',                 L' ',           0x2235,                0x0000),
    DEADTRANS(L'\'',                L' ',           UC_PRIME,              0x0000),
    DEADTRANS(L's',                 L' ',           UC_INTERSECTION,       0x0000),
    DEADTRANS(L'l',                 L' ',           0x2225,                0x0000),
    DEADTRANS(L'k',                 L' ',           UC_CONTAINS,           0x0000),
    DEADTRANS(L'r',                 L' ',           UC_SQUARE_ROOT,        0x0000),
    DEADTRANS(L'p',                 L' ',           UC_PARTIAL_DIFF,       0x0000),
    DEADTRANS(L'u',                 L' ',           UC_UNION,              0x0000),
    DEADTRANS(L'i',                 L' ',           UC_INFINITY,           0x0000),
    DEADTRANS(L'o',                 L' ',           0x2218,                0x0000),
    DEADTRANS(L'8',                 L' ',           UC_ANGLE,              0x0000),
    DEADTRANS(L'9',                 L' ',           0x221F,                0x0000),
    DEADTRANS(L'-',                 L' ',           UC_PLUS_MINUS,         0x0000),
    DEADTRANS(L'7',                 L' ',           0x2221,                0x0000),
    DEADTRANS(L'4',                 L' ',           0x221C,                0x0000),
    DEADTRANS(L'3',                 L' ',           0x221B,                0x0000),
    DEADTRANS(L'.',                 L' ',           UC_DOT_OPERATOR,       0x0000),
    DEADTRANS(L'|',                 L' ',           UC_LOGICAL_OR,         0x0000),
    DEADTRANS(L'|',                 L' ',           UC_LOGICAL_OR,         0x0000),
    DEADTRANS(L'+',                 L' ',           UC_CIRCLED_PLUS,       0x0000),
    DEADTRANS(L'B',                 L' ',           UC_SUPERSET_EQUAL,     0x0000),
    DEADTRANS(L'N',                 L' ',           0x2115,                0x0000),
    DEADTRANS(L'C',                 L' ',           0x2102,                0x0000),
    DEADTRANS(L'X',                 L' ',           0x2204,                0x0000),
    DEADTRANS(L'>',                 L' ',           UC_GREATER_EQUAL,      0x0000),
    DEADTRANS(L'Z',                 L' ',           0x2124,                0x0000),
    DEADTRANS(L'<',                 L' ',           UC_LESS_EQUAL,         0x0000),
    DEADTRANS(L'M',                 L' ',           UC_NOT_ELEMENT,        0x0000),
    DEADTRANS(L'A',                 L' ',           UC_FOR_ALL,            0x0000),
    DEADTRANS(L'H',                 L' ',           0x2285,                0x0000),
    DEADTRANS(L'G',                 L' ',           UC_SUPERSET,           0x0000),
    DEADTRANS(L'F',                 L' ',           0x220E,                0x0000),
    DEADTRANS(L'D',                 L' ',           UC_NABLA,              0x0000),
    DEADTRANS(L':',                 L' ',           UC_THEREFORE,          0x0000),
    DEADTRANS(L'"',                 L' ',           UC_D_PRIME,            0x0000),
    DEADTRANS(L'S',                 L' ',           UC_INTEGRAL,           0x0000),
    DEADTRANS(L'L',                 L' ',           0x2226,                0x0000),
    DEADTRANS(L'K',                 L' ',           0x220C,                0x0000),
    DEADTRANS(L'E',                 L' ',           UC_THERE_EXISTS,       0x0000),
    DEADTRANS(L'R',                 L' ',           0x211D,                0x0000),
    DEADTRANS(L'P',                 L' ',           0x2119,                0x0000),
    DEADTRANS(L'U',                 L' ',           0x2216,                0x0000),
    DEADTRANS(L'O',                 L' ',           UC_EMPTY_SET,          0x0000),
    DEADTRANS(L'Q',                 L' ',           0x211A,                0x0000),
    DEADTRANS(L'*',                 L' ',           UC_CIRCLED_TIMES,      0x0000),
    DEADTRANS(L'^',                 L' ',           UC_SCRIPT_UPPER_P,     0x0000),
    DEADTRANS(L'&',                 L' ',           UC_LOGICAL_AND,        0x0000),
    DEADTRANS(L'%',                 L' ',           UC_PER_MILLE,          0x0000),
    DEADTRANS(L'!',                 L' ',           UC_NOT_EQUAL,          0x0000),
    DEADTRANS(L'~',                 L' ',           UC_ALMOST_EQUAL,       0x0000),
    DEADTRANS(L'^',                 L' ',           UC_SCRIPT_UPPER_P,     0x0000),
    DEADTRANS(L'~',                 L' ',           UC_ALMOST_EQUAL,       0x0000),
    DEADTRANS(L' ',                 L' ',           UC_SQUARE_ROOT,        0x0000),
    {0, 0, 0}
};

//---------------------------------------------------------------------------
// Main keyboard layout structure, point to all tables
//---------------------------------------------------------------------------

static KBDTABLES kbd_tables = {
    .pCharModifiers  = &char_modifiers,
    .pVkToWcharTable = vk_to_wchar,
    .pDeadKey        = dead_keys,
    .pKeyNames       = key_names,
    .pKeyNamesExt    = key_names_ext,
    .pKeyNamesDead   = key_names_dead,
    .pusVSCtoVK      = scancode_to_vk,
    .bMaxVSCtoVK     = ARRAYSIZE(scancode_to_vk),
    .pVSCtoVK_E0     = scancode_to_vk_e0,
    .pVSCtoVK_E1     = scancode_to_vk_e1,
    .fLocaleFlags    = MAKELONG(KLLF_ALTGR, KBD_VERSION),
    .nLgMax          = 0,
    .cbLgEntry       = 0,
    .pLigature       = NULL,
    .dwType          = 34668816,
    .dwSubType       = 1042,
};

//---------------------------------------------------------------------------
// Keyboard layout entry point
//---------------------------------------------------------------------------

__declspec(dllexport) PKBDTABLES KbdLayerDescriptor(void)
{
    return &kbd_tables;
}
